---
title: "Voter Characteristics and Political Support in the US"
# subtitle: "My subtitle if needed"
author: 
  - Tam Ly
  - Renfrew Ao-Ieong
  - Rahma Binth Mohammad
thanks: "Code and data are available at: https://github.com/atn-ly/political_support_in_the_us"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)
library(here)
library(ggplot2)
library(arrow)
library(scales)

#### Read in cleaned data ####

ces2020 = read_parquet(
  file = here("data/analysis_data/ces2020_analysis_data.parquet"),
  show_col_types = FALSE
)
```


# Introduction

The United States (US) presidential election of 2020 resulted in President Joe Biden’s victory, making him the 46th President of the US. The two top runners were Biden for the Democrats and former President Donald Trump for the Republicans. The presidential race between the two was of significant interest to statisticians and polling experts due to its potential impact on polling models and election forecasting. To provide some background, President Biden ran on his merit as a former Vice President of eight years and had faced lots of criticism during his time in office. Moreover, Former President Trump had controversial and career-damaging events. During the 2016 lections, Trump even faced Before the 2020 elections, Trump was charged with misconduct while in office(cite). However, the senate acquitted him of those charges. Thus, both Biden and Trump faced criticism from the electorate. An interesting question to consider is despite these, what characteristics did the voters have? Do they tell us a story on the type of people that voted for Biden and the type that voted for Trump? Answering these questions can help develop polling models and future election forecasting.

For our paper, we used a logistic regression model to estimate the likelihood of voting for Biden or Trump given certain characteristics. We use a binary outcome variable and three predictor variables. Our estimand is the probability that an individual voted for Biden or Trump based on three characteristics, their gender, race, and ownership of a gun. The reason for this choice will be further examined in @sec-model. This data driven approach to elections can bring insight to voter characteristics and the importance of survey data and knowing the electorate.

[insert more of what was done and what was found - overview of results section]

The survey data for this paper is from the Harvard Dataverse Repository. The Cooperative Election Study is a sample survey that consists of pre-election and post-election questions. They provide a guide and a dataset for numerous years. It is also open to the public. [add more]

Data for this analysis and the different applications used will be further introduced in @sec-data. @sec-model provides the model set-up and the justification for the use of that model. @sec-results will show results and @sec-discussion is a discussion of the results including the paper’s weaknesses and biases. 

# Data {#sec-data}

## Sources and Collection

For this paper, we utilized the data from the 2020 Presidential Elections. We selected, gender, race, and whether an individual or a family member in the household owns a gun. We also selected the variable that recorded whether an individual voted for Biden or Trump. The broader context of the dataset is the political landscape of the US during the election cycle of 2020. The outcome of the 2020 election and every presidential election usually changes the direction of the country and demonstrates the perspectives of the majority of the electorate. There may have been similar dataset available, but we chose this one due to relevance to our research question. The questionnaire asked various questions on race, political party preference, voting preference, ownership of a gun and have numerous multiple choice answers available. Thus, this survey data provided us with the information on the demographic characteristics we wanted to consider. 

Our paper aims to address the following two questions: (1) Does gender and race play a role in political preference? (2) Do those that own a gun favour one candidate over the other?

## Methodology

## Variables

## Measurement

# Model {#sec-model}

## Model set-up

The goal of our modeling strategy is to forecast if a person voted for Biden, based only on knowing their gender, race, and gun ownership status.

The model that we are interested in is:

\begin{align} 
y_i|\pi_i &\sim \mbox{Bern}(\pi_i) \\
\mbox{logit}(\pi_i) &= \alpha + \beta \times \mbox{gender}_i + \gamma \times \mbox{education}_i + \delta \times \mbox{gun}_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\delta &\sim \mbox{Normal}(0, 2.5)
\end{align}

Where:

* $y_i$ is the binary outcome variable, representing who respondent $i$ voted for and equal to 1 if Biden and 0 if Trump, 
* $\pi_i$ is the probability that respondent $i$ voted for Biden, 
* ${gender}_i$ is a predictor variable, representing the gender of respondent $i$, 
* ${race}_i$ is a predictor variable, representing the race of respondent $i$, and 
* ${gun}_i$ is a predictor variable, representing the gun ownership status of respondent $i$.

We used a logistic regression model in a Bayesian framework using the package `rstanarm` [@rstanarm], which we will briefly describe here. Logistic regression is a type of generalized linear model. It is a tool for data exploration and used when we are interested in the relationship between a binary outcome variable and some predictor variables. 

The foundation of logistic regression is the Bernoulli distribution and logit function. The Bernoulli distribution is a discrete probability distribution having two possible outcomes, “1” and “0”, in which “1” occurs with probability $p$ and “0” occurs with probability $1-p$. Logistic regression is still a linear model, because the predictor variables enter in a linear fashion [@rohan]. Hence, the logit function links the Bernoulli distribution to the machinery we use in linear models [@rohan].

In our model, we also have the parameters $\alpha$, $\beta$, $\gamma$, and $\delta$ in addition to the variables. The parameter $\alpha$ is the intercept and the parameters, $\beta$, $\gamma$, and $\delta$, are the slope coefficients. We specify prior probability distributions for each of the parameters in our model, but these are just the default priors that `rstanarm` [@rstanarm] uses (Normal distribution with mean and standard deviation of 0 and 2.5).

## Model justification
[Paragraph 1: How features enter the model and why → link with data section]

We chose gender, race, and gun ownership status to be the predictor variables in our model. These features were chosen based on our data section. [more explanation] First, we expect a negative relationship between men and support for Biden. [more explanation] Second, we expect a positive relationship between non-white respondents and support for Biden. [more explanation] Third, we expect a negative relationship between gun owners and support for Biden. [more explanation]

[Paragraph 2: Assumptions that underpin the model]

Logistic regression does not make the same assumptions as linear regression. First, linear regression assumes a continuous outcome variable that can take any number on the real line, whereas logistic regression assumes a binary outcome variable. Furthermore, linear regression requires that the outcome variable is a linear function of the predictor variables, while the outcome in logistic regression is part of the exponential family. However, logistic regression does assume that the relationship between the log-odds of the binary outcome and predictor variables is linear. Lastly, unlike in linear regression, logistic regression does not require the assumption of homoscedasticity of errors.

[Paragraph 3: Alternative models or variants; Strengths and weaknesses; Circumstances in which the model may not be appropriate]

Alternative regression models were considered, but rejected because they were not appropriate for our outcome variable. Linear models assume a continuous outcome variable, and Poisson and Negative binomial models assume count outcome variables. Since our outcome variable is binary, we chose to use logistic regression.

[Paragraph 4: Evidence of model validation and checking, model convergence, and/or diagnostic issues]


# Results [In progress...] {#sec-results}

```{r}
#| echo: false
#| message: false
#| label: tmp-label1
#| tbl-cap: tmp-caption1

ces2020 |>
  ggplot(aes(x = race, fill = voted_for)) +
  stat_count(position = "dodge") +
  facet_wrap(facets = vars(gender)) +
  theme_minimal() +
  labs(
    x = "Race",
    y = "Number of respondents",
    fill = "Voted for"
  ) +
  coord_flip() +
  scale_x_discrete(limits = rev) +
  scale_fill_brewer(palette = "Set1") +
  theme(legend.position = "bottom")

```

```{r}
#| echo: false
#| message: false
#| label: tmp-label2
#| tbl-cap: tmp-caption2

ces2020 |>
  ggplot(aes(x = gun_ownership, fill = voted_for)) +
  stat_count(position = "dodge") +
  facet_wrap(facets = vars(gender)) +
  theme_minimal() +
  labs(
    x = "Gun Ownership",
    y = "Number of respondents",
    fill = "Voted for"
  ) +
  coord_flip() +
  scale_x_discrete(limits = rev, labels = label_wrap(10)) +
  scale_fill_brewer(palette = "Set1") +
  theme(legend.position = "bottom")

```


TEST:
```{r}
library(modelsummary)

modelsummary(
  list(
    "Support Biden" = political_preferences
  ),
  statistic = "mad"
  )
```


# Discussion {#sec-discussion}

## First discussion point {#sec-first-point}

## Second discussion point

## Third discussion point

## Weaknesses and next steps


\newpage


\appendix

# Appendix {-}

# Additional data details

# Model details {#sec-model-details}


\newpage


# References
